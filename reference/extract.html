<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Extract values from a SpatRaster for a set of locations. The locations can be a SpatVector (points, lines, polygons), a data.frame or matrix with (x, y) or (longitude, latitude -- in that order!) coordinates, or a vector with cell numbers.
When argument y is a SpatVector the first column has the ID (record number) of the SpatVector used (unless you set ID=FALSE).
Alternatively, you can use zonal after using rasterize with a SpatVector (this may be more efficient in some cases)."><title>Extract values from a SpatRaster — extract • terra</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Extract values from a SpatRaster — extract"><meta property="og:description" content="Extract values from a SpatRaster for a set of locations. The locations can be a SpatVector (points, lines, polygons), a data.frame or matrix with (x, y) or (longitude, latitude -- in that order!) coordinates, or a vector with cell numbers.
When argument y is a SpatVector the first column has the ID (record number) of the SpatVector used (unless you set ID=FALSE).
Alternatively, you can use zonal after using rasterize with a SpatVector (this may be more efficient in some cases)."><meta property="og:image" content="https://rspatial.github.io/terra/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">terra</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.7-72</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../reference/terra-package.html">Description</a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://rspatial.org">Tutorials</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/rspatial/terra/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Extract values from a SpatRaster</h1>
      
      <div class="d-none name"><code>extract.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Extract values from a SpatRaster for a set of locations. The locations can be a SpatVector (points, lines, polygons), a data.frame or matrix with (x, y) or (longitude, latitude -- in that order!) coordinates, or a vector with cell numbers.</p>
<p>When argument <code>y</code> is a <code>SpatVector</code> the first column has the ID (record number) of the <code>SpatVector</code> used (unless you set <code>ID=FALSE</code>).</p>
<p>Alternatively, you can use <code><a href="zonal.html">zonal</a></code> after using <code><a href="rasterize.html">rasterize</a></code> with a <code>SpatVector</code> (this may be more efficient in some cases).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="co"># S4 method for SpatRaster,SpatVector</span></span>
<span><span class="fu">extract</span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span>, fun<span class="op">=</span><span class="cn">NULL</span>, method<span class="op">=</span><span class="st">"simple"</span>, cells<span class="op">=</span><span class="cn">FALSE</span>, xy<span class="op">=</span><span class="cn">FALSE</span>,</span>
<span>    ID<span class="op">=</span><span class="cn">TRUE</span>, weights<span class="op">=</span><span class="cn">FALSE</span>, exact<span class="op">=</span><span class="cn">FALSE</span>, touches<span class="op">=</span><span class="fu"><a href="geomtype.html">is.lines</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span>, small<span class="op">=</span><span class="cn">TRUE</span>,</span>
<span>  layer<span class="op">=</span><span class="cn">NULL</span>, bind<span class="op">=</span><span class="cn">FALSE</span>, raw<span class="op">=</span><span class="cn">FALSE</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for SpatRaster,SpatExtent</span></span>
<span><span class="fu">extract</span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span>, cells<span class="op">=</span><span class="cn">FALSE</span>, xy<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for SpatRaster,matrix</span></span>
<span><span class="fu">extract</span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span>, cells<span class="op">=</span><span class="cn">FALSE</span>, method<span class="op">=</span><span class="st">"simple"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for SpatRaster,numeric</span></span>
<span><span class="fu">extract</span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span>, xy<span class="op">=</span><span class="cn">FALSE</span>, raw<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for SpatVector,SpatVector</span></span>
<span><span class="fu">extract</span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>x</dt>
<dd><p>SpatRaster or SpatVector of polygons</p></dd>

<dt>y</dt>
<dd><p>SpatVector (points, lines, or polygons). Alternatively, for points, a 2-column matrix or data.frame (x, y) or (lon, lat). Or a vector with cell numbers</p></dd>

<dt>fun</dt>
<dd><p>function to summarize the extracted data by line or polygon geometry. You can use <code>fun=table</code> to tabulate raster values for each line or polygon geometry. If <code>weights=TRUE</code> or <code>exact=TRUE</code> only <code>mean</code>, <code>sum</code>, <code>min</code>, <code>max</code> and <code>table</code> are accepted). Ignored if <code>y</code> has point geometry</p></dd>

<dt>method</dt>
<dd><p>character. method for extracting values with points ("simple" or "bilinear"). With "simple" values for the cell a point falls in are returned. With "bilinear" the returned values are interpolated from the values of the four nearest raster cells</p></dd>

<dt>cells</dt>
<dd><p>logical. If <code>TRUE</code> the cell numbers are also returned, unless <code>fun</code> is not <code>NULL</code>. Also see <code><a href="cells.html">cells</a></code></p></dd>

<dt>xy</dt>
<dd><p>logical. If <code>TRUE</code> the coordinates of the cells are also returned, unless <code>fun</code> is not <code>NULL</code>. See <code><a href="xyCellFrom.html">xyFromCell</a></code></p></dd>

<dt>ID</dt>
<dd><p>logical. Should an ID column be added? If so, the first column returned has the IDs (record numbers) of <code>y</code></p></dd>

<dt>weights</dt>
<dd><p>logical. If <code>TRUE</code> and <code>y</code> has polygons, the approximate fraction of each cell that is covered is returned as well, for example to compute a weighted mean</p></dd>

<dt>exact</dt>
<dd><p>logical. If <code>TRUE</code> and <code>y</code> has polygons, the exact fraction of each cell that is covered is returned as well, for example to compute a weighted mean</p></dd>

<dt>touches</dt>
<dd><p>logical. If <code>TRUE</code>, values for all cells touched by lines or polygons are extracted, not just those on the line render path, or whose center point is within the polygon. Not relevant for points; and always considered <code>TRUE</code> when <code>weights=TRUE</code> or <code>exact=TRUE</code></p></dd>

<dt>small</dt>
<dd><p>logical. If <code>TRUE</code>, values for all cells in touched polygons are extracted if none of the cells center points is within the polygon; even if <code>touches=FALSE</code></p></dd>

<dt>layer</dt>
<dd><p>character or numeric to select the layer to extract from for each geometry. If <code>layer</code> is a character it can be a name in <code>y</code> or a vector of layer names. If it is numeric, it must be integer values between <code>1</code> and <code>nlyr(x)</code></p></dd>

<dt>bind</dt>
<dd><p>logical. If <code>TRUE</code>, a SpatVector is returned consisting of the input SpatVector <code>y</code> and the <code>cbind</code>-ed extracted values</p></dd>

<dt>raw</dt>
<dd><p>logical. If <code>TRUE</code>, a matrix is returned with the "raw" numeric cell values. If <code>FALSE</code>, a data.frame is returned and the cell values are transformed to factor, logical, or integer values, where appropriate</p></dd>

<dt>...</dt>
<dd><p>additional arguments to <code>fun</code> if <code>y</code> is a SpatVector. For example <code>na.rm=TRUE</code>. Or arguments passed to the <code>SpatRaster,SpatVector</code> method if <code>y</code> is a matrix (such as the <code>method</code> and <code>cells</code> arguments)</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>data.frame, matrix or SpatVector</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="values.html">values</a>, <a href="zonal.html">zonal</a>, <a href="extractAlong.html">extractAlong</a>, <a href="extractRange.html">extractRange</a>, <a href="rapp.html">rapp</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">r</span> <span class="op">&lt;-</span> <span class="fu"><a href="rast.html">rast</a></span><span class="op">(</span>ncols<span class="op">=</span><span class="fl">5</span>, nrows<span class="op">=</span><span class="fl">5</span>, xmin<span class="op">=</span><span class="fl">0</span>, xmax<span class="op">=</span><span class="fl">5</span>, ymin<span class="op">=</span><span class="fl">0</span>, ymax<span class="op">=</span><span class="fl">5</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="values.html">values</a></span><span class="op">(</span><span class="va">r</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">:</span><span class="fl">25</span></span></span>
<span class="r-in"><span><span class="va">xy</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="fu"><a href="c.html">c</a></span><span class="op">(</span><span class="fl">0.5</span>,<span class="fl">0.5</span><span class="op">)</span>, <span class="fu"><a href="c.html">c</a></span><span class="op">(</span><span class="fl">2.5</span>,<span class="fl">2.5</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu"><a href="vect.html">vect</a></span><span class="op">(</span><span class="va">xy</span>, crs<span class="op">=</span><span class="st">"+proj=longlat +datum=WGS84"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">extract</span><span class="op">(</span><span class="va">r</span>, <span class="va">xy</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   lyr.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    21</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2    13</span>
<span class="r-in"><span><span class="fu">extract</span><span class="op">(</span><span class="va">r</span>, <span class="va">p</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ID lyr.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  1    21</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  2    13</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">r</span><span class="op">[</span><span class="fl">1</span>,<span class="op">]</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   lyr.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1     1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2     2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3     3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4     4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5     5</span>
<span class="r-in"><span><span class="va">r</span><span class="op">[</span><span class="fl">5</span><span class="op">]</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   lyr.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1     5</span>
<span class="r-in"><span><span class="va">r</span><span class="op">[</span>,<span class="fl">5</span><span class="op">]</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   lyr.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1     5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2    10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3    15</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4    20</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5    25</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">r</span><span class="op">[</span><span class="fu"><a href="c.html">c</a></span><span class="op">(</span><span class="fl">0</span><span class="op">:</span><span class="fl">2</span>, <span class="fl">99</span><span class="op">:</span><span class="fl">101</span><span class="op">)</span><span class="op">]</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   lyr.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1     1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2     2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5    NA</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">f</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"ex/meuse.tif"</span>, package<span class="op">=</span><span class="st">"terra"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">r</span> <span class="op">&lt;-</span> <span class="fu"><a href="rast.html">rast</a></span><span class="op">(</span><span class="va">f</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">xy</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="fl">179000</span>, <span class="fl">330000</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">xy</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="va">xy</span><span class="op">-</span><span class="fl">100</span>, <span class="va">xy</span>, <span class="va">xy</span><span class="op">+</span><span class="fl">1000</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">extract</span><span class="op">(</span><span class="va">r</span>, <span class="va">xy</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   meuse</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   378</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2   251</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   208</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu"><a href="vect.html">vect</a></span><span class="op">(</span><span class="va">xy</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">g</span> <span class="op">&lt;-</span> <span class="fu"><a href="geometry.html">geom</a></span><span class="op">(</span><span class="va">p</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">g</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      geom part      x      y hole</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]    1    1 178900 329900    0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2,]    2    1 179000 330000    0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3,]    3    1 180000 331000    0</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">extract</span><span class="op">(</span><span class="va">r</span>, <span class="va">p</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ID meuse</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  1   378</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  2   251</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  3   208</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="va">r</span> <span class="op">+</span> <span class="fl">10</span></span></span>
<span class="r-in"><span><span class="fu">extract</span><span class="op">(</span><span class="va">x</span>, <span class="va">p</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ID meuse</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  1   388</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  2   261</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  3   218</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">i</span> <span class="op">&lt;-</span> <span class="fu"><a href="xyCellFrom.html">cellFromXY</a></span><span class="op">(</span><span class="va">r</span>, <span class="va">xy</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">x</span><span class="op">[</span><span class="va">i</span><span class="op">]</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   meuse</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   388</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2   261</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   218</span>
<span class="r-in"><span><span class="va">r</span><span class="op">[</span><span class="va">i</span><span class="op">]</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   meuse</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   378</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2   251</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   208</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="c.html">c</a></span><span class="op">(</span><span class="va">x</span>,<span class="va">x</span><span class="op">*</span><span class="fl">2</span>,<span class="va">x</span><span class="op">*</span><span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">y</span><span class="op">[</span><span class="va">i</span><span class="op">]</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   meuse meuse meuse</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   388   776  1164</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2   261   522   783</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   218   436   654</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## extract with a polygon</span></span></span>
<span class="r-in"><span><span class="va">f</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"ex/lux.shp"</span>, package<span class="op">=</span><span class="st">"terra"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">v</span> <span class="op">&lt;-</span> <span class="fu"><a href="vect.html">vect</a></span><span class="op">(</span><span class="va">f</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">v</span> <span class="op">&lt;-</span> <span class="va">v</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span>,<span class="op">]</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">rf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"ex/elev.tif"</span>, package<span class="op">=</span><span class="st">"terra"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="rast.html">rast</a></span><span class="op">(</span><span class="va">rf</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">extract</span><span class="op">(</span><span class="va">x</span>, <span class="va">v</span>, <span class="va">mean</span>, na.rm<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ID elevation</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  1  467.1052</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  2  333.8629</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">z</span> <span class="op">&lt;-</span> <span class="fu"><a href="rast.html">rast</a></span><span class="op">(</span><span class="va">v</span>, resolution<span class="op">=</span><span class="fl">.1</span>, names<span class="op">=</span><span class="st">"test"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="values.html">values</a></span><span class="op">(</span><span class="va">z</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="dimensions.html">ncell</a></span><span class="op">(</span><span class="va">z</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">e</span> <span class="op">&lt;-</span> <span class="fu">extract</span><span class="op">(</span><span class="va">z</span>, <span class="va">v</span>, ID<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">e</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ID test</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  1    2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  1    3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  1    6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  1    7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  1    8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  2   13</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  2   17</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8  2   18</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9  2   19</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/tapply.html" class="external-link">tapply</a></span><span class="op">(</span><span class="va">e</span><span class="op">[</span>,<span class="fl">2</span><span class="op">]</span>, <span class="va">e</span><span class="op">[</span>,<span class="fl">1</span><span class="op">]</span>, <span class="va">mean</span>, na.rm<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     1     2 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  5.20 16.75 </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="c.html">c</a></span><span class="op">(</span><span class="va">z</span>, <span class="va">z</span><span class="op">*</span><span class="fl">2</span>, <span class="va">z</span><span class="op">/</span><span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="names.html">names</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">letters</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">e</span> <span class="op">&lt;-</span> <span class="fu">extract</span><span class="op">(</span><span class="va">x</span>, <span class="va">v</span>, ID<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">de</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="va">e</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="aggregate.html">aggregate</a></span><span class="op">(</span><span class="va">de</span><span class="op">[</span>,<span class="fl">2</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span>, <span class="va">de</span><span class="op">[</span>,<span class="fl">1</span>,drop<span class="op">=</span><span class="cn">FALSE</span><span class="op">]</span>, <span class="va">mean</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ID     a    b        c</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  1  5.20 10.4 1.733333</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  2 16.75 33.5 5.583333</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Robert J. Hijmans.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

